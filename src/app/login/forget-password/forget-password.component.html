<section class="login-wrapper">
  <div class="login-main">
    <div class="login-title">
      <div class="login-logo">
        <a href="#"><img src="../../assets/images/logo-login.png" alt="" width="400px" /></a>
      </div>
      <h2><span>Hello there,</span> Welcome to BrewersInsight</h2>
      <p class="login-copyright">&copy; Copyright 2020 WarrierTech</p>
    </div>
    <div class="login-details">
      <form class="login-form" [formGroup]="resetPasswordForm" (submit)="forgotPasswordSubmit()">
        <h3 class="mb-3">Forgot Password</h3>
        <p class="mt-4 mb-4">
          Enter your email address you are using for your account below and we
          will send you a password reset link.
        </p>
        <div class="form-group">
          <label for="">Email
            <span><i class="fas fa-asterisk fa-mandatory"></i></span>
          </label>
          <input tabindex="1" type="email" (keyup)="getEmailAddress($event.target.value)" #enterEmailAddress
            formControlName="email" class="form-control position-relative login-form-radius"
            placeholder="Enter Email Address" />
          <div *ngIf="formSubmitted && form.email.errors?.required" class="valid-error">
            Please enter email
          </div>
          <div *ngIf="formSubmitted && form.email.errors?.email" class="valid-error">
            Please enter valid email
          </div>
        </div>

        <div class="form-group">
          <button type="submit" tabindex="4" class="btn mt-5 btn-default login-btn btn-radius">
            Request Reset Link
          </button>
        </div>
        <div class="form-group">
          <p class="mt-5 mb-3 text-muted text-center signup-action">
            Did you remember your password? <a href="/login">Try Logging in</a>
          </p>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- The Modal -->
<div class="modal" id="myModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 rounded-0">
      <!-- Modal Header -->
      <div class="modal-header modal-border">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <i class="menu-icon ion-close ng-star-inserted"></i>
        </button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <h5 class="modal-title text-center">FORGOT PASSWORD</h5>
        <div class="form container mt-4" *ngIf="!recoveryEmailSent && !isGeneralUser">
          <div class="form-group row">
            <label for="" class="col-sm-12 text-center">Please enter your email address to start password
              recovery.</label>
            <div class="col-sm-12 mt-2 modal-text">
              <input type="text" #emailField (keyup)="emailValid($event.target.value); isClickedOnce = false"
                placeholder="Enter email address" class="form-control" />
              <div *ngIf="emailError !== ''" class="valid-error">
                {{ emailError }}
              </div>
            </div>
          </div>
        </div>
        <div class="form container mt-4" *ngIf="recoveryEmailSent && !isGeneralUser">
          <div class="form-group row">
            <label for="" class="col-sm-12 text-center">Password reset link is send to email {{ emailAddress }}.</label>
          </div>
        </div>
        <div class="form container mt-4" *ngIf="!recoveryEmailSent && isGeneralUser">
          <div class="form-group row">
            <label for="" class="col-sm-12 text-center">Please contact your supervisor to reset your password.</label>
          </div>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer p-0 d-flex">
        <button type="button" *ngIf="!recoveryEmailSent && !isGeneralUser" data [class.disabled]="isClickedOnce"
          [disabled]="!isEmailValid" (click)="emailSubmit(this); isClickedOnce = true" class="btn btn-modal-submit">
          SUBMIT
        </button>
        <button type="button" *ngIf="recoveryEmailSent || isGeneralUser" class="btn btn-modal-submit"
          data-dismiss="modal">
          CLOSE
        </button>
      </div>
    </div>
  </div>
</div>